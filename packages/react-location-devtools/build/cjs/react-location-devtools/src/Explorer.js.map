{"version":3,"file":"Explorer.js","sources":["../../../../src/Explorer.tsx"],"sourcesContent":["// @ts-nocheck\n\nimport React from 'react'\n\nimport { styled } from './utils'\n\nexport const Entry = styled('div', {\n  fontFamily: 'Menlo, monospace',\n  fontSize: '0.9em',\n  lineHeight: '1.7',\n  outline: 'none',\n  wordBreak: 'break-word',\n})\n\nexport const Label = styled('span', {\n  cursor: 'pointer',\n  color: 'white',\n})\n\nexport const Value = styled('span', (props, theme) => ({\n  color: theme.danger,\n}))\n\nexport const SubEntries = styled('div', {\n  marginLeft: '.1em',\n  paddingLeft: '1em',\n  borderLeft: '2px solid rgba(0,0,0,.15)',\n})\n\nexport const Info = styled('span', {\n  color: 'grey',\n  fontSize: '.7em',\n})\n\nexport const Expander = ({ expanded, style = {}, ...rest }) => (\n  <span\n    style={{\n      display: 'inline-block',\n      transition: 'all .1s ease',\n      transform: `rotate(${expanded ? 90 : 0}deg) ${style.transform || ''}`,\n      ...style,\n    }}\n  >\n    â–¶\n  </span>\n)\n\nconst DefaultRenderer = ({\n  handleEntry,\n  label,\n  value,\n  // path,\n  subEntries,\n  subEntryPages,\n  type,\n  // depth,\n  expanded,\n  toggle,\n  pageSize,\n}) => {\n  const [expandedPages, setExpandedPages] = React.useState([])\n\n  return (\n    <Entry key={label}>\n      {subEntryPages?.length ? (\n        <>\n          <Label onClick={() => toggle()}>\n            <Expander expanded={expanded} /> {label}{' '}\n            <Info>\n              {String(type).toLowerCase() === 'iterable' ? '(Iterable) ' : ''}\n              {subEntries.length} {subEntries.length > 1 ? `items` : `item`}\n            </Info>\n          </Label>\n          {expanded ? (\n            subEntryPages.length === 1 ? (\n              <SubEntries>\n                {subEntries.map(entry => handleEntry(entry))}\n              </SubEntries>\n            ) : (\n              <SubEntries>\n                {subEntryPages.map((entries, index) => (\n                  <div key={index}>\n                    <Entry>\n                      <Label\n                        onClick={() =>\n                          setExpandedPages(old =>\n                            old.includes(index)\n                              ? old.filter(d => d !== index)\n                              : [...old, index]\n                          )\n                        }\n                      >\n                        <Expander expanded={expanded} /> [{index * pageSize} ...{' '}\n                        {index * pageSize + pageSize - 1}]\n                      </Label>\n                      {expandedPages.includes(index) ? (\n                        <SubEntries>\n                          {entries.map(entry => handleEntry(entry))}\n                        </SubEntries>\n                      ) : null}\n                    </Entry>\n                  </div>\n                ))}\n              </SubEntries>\n            )\n          ) : null}\n        </>\n      ) : (\n        <>\n          <Label>{label}:</Label>{' '}\n          <Value>\n            {JSON.stringify(value, Object.getOwnPropertyNames(Object(value)))}\n          </Value>\n        </>\n      )}\n    </Entry>\n  )\n}\n\nexport default function Explorer({\n  value,\n  defaultExpanded,\n  renderer = DefaultRenderer,\n  pageSize = 100,\n  depth = 0,\n  ...rest\n}) {\n  const [expanded, setExpanded] = React.useState(defaultExpanded)\n\n  const toggle = set => {\n    setExpanded(old => (typeof set !== 'undefined' ? set : !old))\n  }\n\n  const path = []\n\n  let type = typeof value\n  let subEntries\n  const subEntryPages = []\n\n  const makeProperty = sub => {\n    const newPath = path.concat(sub.label)\n    const subDefaultExpanded =\n      defaultExpanded === true\n        ? { [sub.label]: true }\n        : defaultExpanded?.[sub.label]\n    return {\n      ...sub,\n      path: newPath,\n      depth: depth + 1,\n      defaultExpanded: subDefaultExpanded,\n    }\n  }\n\n  if (Array.isArray(value)) {\n    type = 'array'\n    subEntries = value.map((d, i) =>\n      makeProperty({\n        label: i,\n        value: d,\n      })\n    )\n  } else if (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value[Symbol.iterator] === 'function'\n  ) {\n    type = 'Iterable'\n    subEntries = Array.from(value, (val, i) =>\n      makeProperty({\n        label: i,\n        value: val,\n      })\n    )\n  } else if (typeof value === 'object' && value !== null) {\n    type = 'object'\n    // eslint-disable-next-line no-shadow\n    subEntries = Object.entries(value).map(([label, value]) =>\n      makeProperty({\n        label,\n        value,\n      })\n    )\n  }\n\n  if (subEntries) {\n    let i = 0\n\n    while (i < subEntries.length) {\n      subEntryPages.push(subEntries.slice(i, i + pageSize))\n      i = i + pageSize\n    }\n  }\n\n  return renderer({\n    handleEntry: entry => (\n      <Explorer key={entry.label} renderer={renderer} {...rest} {...entry} />\n    ),\n    type,\n    subEntries,\n    subEntryPages,\n    depth,\n    value,\n    path,\n    expanded,\n    toggle,\n    pageSize,\n    ...rest,\n  })\n}\n"],"names":["Entry","styled","fontFamily","fontSize","lineHeight","outline","wordBreak","Label","cursor","color","Value","props","theme","danger","SubEntries","marginLeft","paddingLeft","borderLeft","Info","Expander","expanded","style","React","display","transition","transform","DefaultRenderer","handleEntry","label","value","subEntries","subEntryPages","type","toggle","pageSize","useState","expandedPages","setExpandedPages","length","String","toLowerCase","map","entry","entries","index","old","includes","filter","d","JSON","stringify","Object","getOwnPropertyNames","Explorer","defaultExpanded","renderer","depth","rest","setExpanded","set","path","makeProperty","sub","newPath","concat","subDefaultExpanded","Array","isArray","i","Symbol","iterator","from","val","push","slice"],"mappings":"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"}