{"version":3,"file":"index.development.js","sources":["../../src/index.tsx"],"sourcesContent":["import {\n  Route,\n  parsePathname,\n  PartialGenerics,\n  DefaultGenerics,\n} from '@tanstack/react-location'\n\nexport function rankRoutes<TGenerics extends PartialGenerics = DefaultGenerics>(\n  routes: Route<TGenerics>[],\n): Route<TGenerics>[] {\n  return [...routes]\n    .map((d, i) => {\n      return { ...d, index: i }\n    })\n    .sort((a, b) => {\n      if (a.search || b.search) {\n        if (!b.search) {\n          return -1\n        }\n        if (!a.search) {\n          return 1\n        }\n      }\n\n      const aSegments = parsePathname(a.path)\n      const bSegments = parsePathname(b.path)\n\n      // Multi-sort by each segment\n      for (let i = 0; i < aSegments.length; i++) {\n        const aSegment = aSegments[i]\n        const bSegment = bSegments[i]\n\n        if (aSegment && bSegment) {\n          let sort: -1 | 1 | 0 = 0\n          ;(\n            [\n              {\n                key: 'value',\n                value: '*',\n              },\n              {\n                key: 'value',\n                value: '/',\n              },\n              {\n                key: 'type',\n                value: 'param',\n              },\n            ] as const\n          ).some((condition) => {\n            if (\n              [aSegment[condition.key], bSegment[condition.key]].includes(\n                condition.value,\n              ) &&\n              aSegment[condition.key] !== bSegment[condition.key]\n            ) {\n              sort = aSegment[condition.key] === condition.value ? 1 : -1\n              return true\n            }\n\n            return false\n          })\n\n          if (sort !== 0) {\n            return sort\n          }\n        } else {\n          // Then shorter segments last\n          return aSegment ? -1 : 1\n        }\n      }\n\n      // Keep things stable by route index\n      return a.index - b.index\n    })\n}\n"],"names":["rankRoutes","routes","map","d","i","index","sort","a","b","search","aSegments","parsePathname","path","bSegments","aSegment","bSegment","key","value","some","condition","includes","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAOO,SAASA,UAAT,CACLC,MADK,EAEe;EACpB,SAAO,UAAIA,MAAJ,EACJC,GADI,CACA,UAACC,CAAD,EAAIC,CAAJ,EAAU;EACb,wBAAYD,CAAZ;EAAeE,MAAAA,KAAK,EAAED;EAAtB;EACD,GAHI,EAIJE,IAJI,CAIC,UAACC,CAAD,EAAIC,CAAJ,EAAU;EACd,QAAID,CAAC,CAACE,MAAF,IAAYD,CAAC,CAACC,MAAlB,EAA0B;EACxB,UAAI,CAACD,CAAC,CAACC,MAAP,EAAe;EACb,eAAO,CAAC,CAAR;EACD;;EACD,UAAI,CAACF,CAAC,CAACE,MAAP,EAAe;EACb,eAAO,CAAP;EACD;EACF;;EAED,QAAMC,SAAS,GAAGC,2BAAa,CAACJ,CAAC,CAACK,IAAH,CAA/B;EACA,QAAMC,SAAS,GAAGF,2BAAa,CAACH,CAAC,CAACI,IAAH,CAA/B,CAXc;;EAAA,+BAcLR,CAdK;EAeZ,UAAMU,QAAQ,GAAGJ,SAAS,CAACN,CAAD,CAA1B;EACA,UAAMW,QAAQ,GAAGF,SAAS,CAACT,CAAD,CAA1B;;EAEA,UAAIU,QAAQ,IAAIC,QAAhB,EAA0B;EACxB,YAAIT,IAAgB,GAAG,CAAvB;EAEE,SACE;EACEU,UAAAA,GAAG,EAAE,OADP;EAEEC,UAAAA,KAAK,EAAE;EAFT,SADF,EAKE;EACED,UAAAA,GAAG,EAAE,OADP;EAEEC,UAAAA,KAAK,EAAE;EAFT,SALF,EASE;EACED,UAAAA,GAAG,EAAE,MADP;EAEEC,UAAAA,KAAK,EAAE;EAFT,SATF,CADD,CAeCC,IAfD,CAeM,UAACC,SAAD,EAAe;EACpB,cACE,CAACL,QAAQ,CAACK,SAAS,CAACH,GAAX,CAAT,EAA0BD,QAAQ,CAACI,SAAS,CAACH,GAAX,CAAlC,EAAmDI,QAAnD,CACED,SAAS,CAACF,KADZ,KAGAH,QAAQ,CAACK,SAAS,CAACH,GAAX,CAAR,KAA4BD,QAAQ,CAACI,SAAS,CAACH,GAAX,CAJtC,EAKE;EACAV,YAAAA,IAAI,GAAGQ,QAAQ,CAACK,SAAS,CAACH,GAAX,CAAR,KAA4BG,SAAS,CAACF,KAAtC,GAA8C,CAA9C,GAAkD,CAAC,CAA1D;EACA,mBAAO,IAAP;EACD;;EAED,iBAAO,KAAP;EACD,SA3BA;;EA6BD,YAAIX,IAAI,KAAK,CAAb,EAAgB;EACd;EAAA,eAAOA;EAAP;EACD;EACF,OAlCD,MAkCO;EACL;EACA;EAAA,aAAOQ,QAAQ,GAAG,CAAC,CAAJ,GAAQ;EAAvB;EACD;EAvDW;;EAcd,SAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGM,SAAS,CAACW,MAA9B,EAAsCjB,CAAC,EAAvC,EAA2C;EAAA,uBAAlCA,CAAkC;;EAAA;EA0C1C,KAxDa;;;EA2Dd,WAAOG,CAAC,CAACF,KAAF,GAAUG,CAAC,CAACH,KAAnB;EACD,GAhEI,CAAP;EAiED;;;;;;;;;;"}