{"version":3,"file":"index.js","sources":["../../../../../src/index.tsx"],"sourcesContent":["import { stringify, parse } from './jsurl'\nimport { decode, encode } from './qss'\n\nexport function stringifySearch(search: Record<string, unknown>) {\n  search = { ...search }\n\n  if (search) {\n    Object.keys(search).forEach((key) => {\n      const val = search[key]\n      if (typeof val === 'undefined' || val === undefined) {\n        delete search[key]\n      } else if (val && typeof val === 'object' && val !== null) {\n        try {\n          search[key] = stringify(val)\n        } catch (err) {\n          // silent\n        }\n      }\n    })\n  }\n\n  const searchStr = encode(search as Record<string, string>).toString()\n\n  return searchStr ? `?${searchStr}` : ''\n}\n\nexport function parseSearch(searchStr: string): Record<string, any> {\n  if (searchStr.substring(0, 1) === '?') {\n    searchStr = searchStr.substring(1)\n  }\n\n  let query: Record<string, unknown> = decode(searchStr)\n\n  // Try to parse any query params that might be json\n  for (let key in query) {\n    const value = query[key]\n    if (typeof value === 'string') {\n      try {\n        query[key] = parse(value)\n      } catch (err) {\n        //\n      }\n    }\n  }\n\n  return query\n}\n"],"names":["stringifySearch","search","Object","keys","forEach","key","val","undefined","stringify","err","searchStr","encode","toString","parseSearch","substring","query","decode","value","parse"],"mappings":";;;;;;;;;;;;;;;;;;AAGO,SAASA,eAAT,CAAyBC,MAAzB,EAA0D;AAC/DA,EAAAA,MAAM,2BAAQA,MAAR,CAAN;;AAEA,MAAIA,MAAJ,EAAY;AACVC,IAAAA,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,OAApB,CAA4B,UAACC,GAAD,EAAS;AACnC,UAAMC,GAAG,GAAGL,MAAM,CAACI,GAAD,CAAlB;;AACA,UAAI,OAAOC,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAKC,SAA1C,EAAqD;AACnD,eAAON,MAAM,CAACI,GAAD,CAAb;AACD,OAFD,MAEO,IAAIC,GAAG,IAAI,OAAOA,GAAP,KAAe,QAAtB,IAAkCA,GAAG,KAAK,IAA9C,EAAoD;AACzD,YAAI;AACFL,UAAAA,MAAM,CAACI,GAAD,CAAN,GAAcG,eAAS,CAACF,GAAD,CAAvB;AACD,SAFD,CAEE,OAAOG,GAAP,EAAY;AAEb;AACF;AACF,KAXD;AAYD;;AAED,MAAMC,SAAS,GAAGC,UAAM,CAACV,MAAD,CAAN,CAAyCW,QAAzC,EAAlB;AAEA,SAAOF,SAAS,SAAOA,SAAP,GAAqB,EAArC;AACD;AAEM,SAASG,WAAT,CAAqBH,SAArB,EAA6D;AAClE,MAAIA,SAAS,CAACI,SAAV,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,GAAlC,EAAuC;AACrCJ,IAAAA,SAAS,GAAGA,SAAS,CAACI,SAAV,CAAoB,CAApB,CAAZ;AACD;;AAED,MAAIC,KAA8B,GAAGC,UAAM,CAACN,SAAD,CAA3C,CALkE;;AAQlE,OAAK,IAAIL,GAAT,IAAgBU,KAAhB,EAAuB;AACrB,QAAME,KAAK,GAAGF,KAAK,CAACV,GAAD,CAAnB;;AACA,QAAI,OAAOY,KAAP,KAAiB,QAArB,EAA+B;AAC7B,UAAI;AACFF,QAAAA,KAAK,CAACV,GAAD,CAAL,GAAaa,WAAK,CAACD,KAAD,CAAlB;AACD,OAFD,CAEE,OAAOR,GAAP,EAAY;AAEb;AACF;AACF;;AAED,SAAOM,KAAP;AACD;;;;;"}