/**
 * react-location-lite
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactLocationLite={},e.React,e.History)}(this,(function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=n(t);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var o=["children","location","routes","basepath"],c=["to","search","hash","children","target","style","replace","onClick","onMouseEnter","className","getActiveProps","getInactiveProps","activeOptions","disabled","_ref"],s=["style","className"],l=["style","className"],h=["children"],f=a.createContext(null),v=a.createContext(null),p=a.createContext(null),d=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),m=d?a.useLayoutEffect:a.useEffect,y=function(){function e(e){var t,n,a=this;this.listeners=[],this.isTransitioning=!1,this.history=(null==e?void 0:e.history)||(d?r.createBrowserHistory():r.createMemoryHistory()),this.stringifySearch=null!=(t=null==e?void 0:e.stringifySearch)?t:q,this.parseSearch=null!=(n=null==e?void 0:e.parseSearch)?n:D,this.current=this.parseLocation(this.history.location),this.destroy=this.history.listen((function(e){a.current=a.parseLocation(e.location,a.current),a.notify()}))}var t=e.prototype;return t.subscribe=function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}},t.notify=function(){this.listeners.forEach((function(e){return e()}))},t.buildNext=function(e,t){var r,n,a;void 0===e&&(e="/"),void 0===t&&(t={});var u=i({},this.current,t.from),o=z(e,u.pathname,""+(null!=(r=t.to)?r:".")),c=null!=(n=!0===t.search?u.search:C(t.search,u.search))?n:{},s=null!=(a=t.__searchFilters)&&a.length?t.__searchFilters.reduce((function(e,t){return t(e,c)}),u.search):c,l=F(u.search,s),h=this.stringifySearch(l),f=C(t.hash,u.hash);return{pathname:o,search:l,searchStr:h,hash:f=f?"#"+f:"",href:""+o+h+f,key:t.key}},t.navigate=function(e,t){this.current=e,this.navigateTimeout&&clearTimeout(this.navigateTimeout);var r="replace";return t||(r="push"),this.parseLocation(this.history.location).href===this.current.href&&!this.current.key&&(r="replace"),"replace"===r?this.history.replace({pathname:this.current.pathname,hash:this.current.hash,search:this.current.searchStr}):this.history.push({pathname:this.current.pathname,hash:this.current.hash,search:this.current.searchStr})},t.parseLocation=function(e,t){var r,n=this.parseSearch(e.search);return{pathname:e.pathname,searchStr:e.search,search:F(null==t?void 0:t.search,n),hash:null!=(r=e.hash.split("#").reverse()[0])?r:"",href:""+e.pathname+e.search+e.hash,key:e.key}},e}();function g(e){return a.createElement(v.Provider,e)}function b(){var e=a.useContext(f);return _(!!e,"useLocation must be used within a <ReactLocation />"),e.location}function w(){var e=a.useContext(p);if(!e)throw _(!0,"You are trying to use useRouter() outside of ReactLocation!"),new Error;return e}function P(e,t){if(!e.routes.length)return[];var r=[];return function n(a,u){var o,c=u.pathname,s=u.params,l=(null!=e&&e.filterRoutes?null==e?void 0:e.filterRoutes(a):a).find((function(r){var n,a,u=H([c,r.path]),o=!!("/"!==r.path||null!=(n=r.children)&&n.length),l=x(t,{to:u,search:r.search,fuzzy:o,caseSensitive:null!=(a=r.caseSensitive)?a:e.caseSensitive});return l&&(s=i({},s,l)),!!l}));if(l){var h=E(l.path,s);c=H([c,h]);var f={id:E(l.id,s,!0),route:l,params:s,pathname:c,search:t.search};r.push(f),null!=(o=l.children)&&o.length&&n(l.children,f)}}(e.routes,e.rootMatch),r}function E(e,t,r){return H(T(e).map((function(e){return"*"!==e.value||r?"param"===e.type?null!=(n=t[e.value.substring(1)])?n:"":e.value:"";var n})))}function O(){return a.useContext(v)}function S(){var e;return null==(e=O())?void 0:e[0]}function j(){var e=b(),t=S(),r=R();return U((function(n){var a,i=n.search,u=n.hash,o=n.replace,c=n.from,s=n.to,l=n.fromCurrent;l=null!=(a=l)?a:void 0===s;var h=r({to:s,search:i,hash:u,from:l?e.current:null!=c?c:{pathname:t.pathname}});e.navigate(h,o)}))}function R(){var e=b(),t=w();return U((function(r){var n=e.buildNext(t.basepath,r),a=P(t,n).map((function(e){var t;return null!=(t=e.route.searchFilters)?t:[]})).flat().filter(Boolean);return e.buildNext(t.basepath,i({},r,{__searchFilters:a}))}))}function k(){var e,t,r=w(),n=O();n[0];var i=n.slice(1),u=i[0];if(!u)return null;var o=null!=(e=u.route.element)?e:r.defaultElement,c=a.createElement(g,{value:i},null!=o?o:a.createElement(k,null)),s=null!=(t=u.route.pendingElement)?t:r.defaultPendingElement;return s?a.createElement(a.Suspense,{fallback:s},c):c}function L(){var e=w(),t=S();return U((function(r){return z(e.basepath,t.pathname,B(r))}))}function x(e,t){var r=A(e,t),n=function(e,t){return!(!t.search||!t.search(e.search))}(e,t);if((!t.to||r)&&(!t.search||n))return null!=r?r:{}}function M(){var e=w(),t=L();return U((function(r){return r=i({},r,{to:r.to?t(""+r.to):void 0}),x(e.state.location,r)}))}function N(e,t){var r=b();a.useEffect((function(){if(t){var n=r.history.block((function(t){window.confirm(e)?(n(),t.retry()):r.current.pathname=window.location.pathname}));return n}}),[t,r,e])}function _(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function C(e,t){return"function"==typeof e?e(t):e}function H(e){return B(e.filter(Boolean).join("/"))}function B(e){return(""+e).replace(/\/{2,}/g,"/")}function A(e,t){var r,n=T(e.pathname),a=T(""+(null!=(r=t.to)?r:"*")),i={};return function(){for(var e=0;e<Math.max(n.length,a.length);e++){var r=n[e],u=a[e],o=e===a.length-1,c=e===n.length-1;if(u){if("wildcard"===u.type)return!(null==r||!r.value)&&(i["*"]=H(n.slice(e).map((function(e){return e.value}))),!0);if("pathname"===u.type){if("/"===u.value&&(null==r||!r.value))return!0;if(r)if(t.caseSensitive){if(u.value!==r.value)return!1}else if(u.value.toLowerCase()!==r.value.toLowerCase())return!1}if(!r)return!1;"param"===u.type&&(i[u.value.substring(1)]=r.value)}if(o&&!c)return!!t.fuzzy}return!0}()?i:void 0}function T(e){if(!e)return[];var t=[];if("/"===(e=B(e)).slice(0,1)&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),!e)return t;var r=e.split("/").filter(Boolean);return t.push.apply(t,r.map((function(e){return e.startsWith("*")?{type:"wildcard",value:e}:":"===e.charAt(0)?{type:"param",value:e}:{type:"pathname",value:e}}))),"/"===e.slice(-1)&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),t}function z(e,t,r){t=t.replace(new RegExp("^"+e),"/"),r=r.replace(new RegExp("^"+e),"/");var n=T(t),a=T(r);return a.forEach((function(e,t){if("/"===e.value)t?t===a.length-1&&n.push(e):n=[e];else if(".."===e.value)n.pop();else{if("."===e.value)return;n.push(e)}})),B(H([e].concat(n.map((function(e){return e.value})))))}function U(e){var t=a.useRef(),r=a.useRef(e);return r.current=e,t.current||(t.current=function(){return r.current.apply(r,arguments)}),t.current}function F(e,t){if(e===t)return e;var r=Array.isArray(e)&&Array.isArray(t);if(r||I(e)&&I(t)){for(var n=r?e.length:Object.keys(e).length,a=r?t:Object.keys(t),i=a.length,u=r?[]:{},o=0,c=0;c<i;c++){var s=r?c:a[c];u[s]=F(e[s],t[s]),u[s]===e[s]&&o++}return n===i&&o===n?e:u}return t}function I(e){if(!K(e))return!1;var t=e.constructor;if(void 0===t)return!0;var r=t.prototype;return!!K(r)&&!!r.hasOwnProperty("isPrototypeOf")}function K(e){return"[object Object]"===Object.prototype.toString.call(e)}function q(e){(e=i({},e))&&Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r||void 0===r)delete e[t];else if(r&&"object"==typeof r&&null!==r)try{e[t]=JSON.stringify(r)}catch(e){}}));var t=new URLSearchParams(e).toString();return t?"?"+t:""}function D(e){"?"===e.substring(0,1)&&(e=e.substring(1));var t=Object.fromEntries(new URLSearchParams(e).entries());for(var r in t){var n=t[r];try{t[r]=JSON.parse(n)}catch(e){}}return t}Object.defineProperty(e,"createBrowserHistory",{enumerable:!0,get:function(){return r.createBrowserHistory}}),Object.defineProperty(e,"createHashHistory",{enumerable:!0,get:function(){return r.createHashHistory}}),Object.defineProperty(e,"createMemoryHistory",{enumerable:!0,get:function(){return r.createMemoryHistory}}),e.Link=function(e){var t=e.to,r=void 0===t?".":t,n=e.search,o=e.hash,h=e.children,f=e.target,v=e.style,p=void 0===v?{}:v,d=e.replace,m=e.onClick;e.onMouseEnter;var y=e.className,g=void 0===y?"":y,w=e.getActiveProps,P=void 0===w?function(){return{}}:w,E=e.getInactiveProps,O=void 0===E?function(){return{}}:E,k=e.activeOptions,L=e.disabled,x=e._ref,M=u(e,c),N=S(),C=b(),H=j(),B=R();try{_(!1,"<Link /> should not be used for external URLs like: "+new URL(""+r).href)}catch(e){}var A=B({to:r,search:n,hash:o,from:{pathname:N.pathname}}),T=C.current.pathname===A.pathname,z=C.current.pathname.split("/"),U=A.pathname.split("/").every((function(e,t){return e===z[t]})),F=C.current.hash===A.hash,I=null!=k&&k.exact?T:U,K=null==k||!k.includeHash||F,q=I&&K,D=q?P():{},J=D.style,$=void 0===J?{}:J,W=D.className,Y=void 0===W?"":W,G=u(D,s),Q=q?{}:O(),V=Q.style,X=void 0===V?{}:V,Z=Q.className,ee=void 0===Z?"":Z,te=u(Q,l);return a.createElement("a",i({ref:x,href:L?void 0:A.href,onClick:function(e){m&&m(e),function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||e.defaultPrevented||f&&"_self"!==f||0!==e.button||(e.preventDefault(),H({to:r,search:n,hash:o,replace:d,from:{pathname:N.pathname}}))},target:f,style:i({},p,$,X),className:[g,Y,ee].filter(Boolean).join(" ")||void 0},L?{role:"link","aria-disabled":!0}:void 0,M,G,te,{children:"function"==typeof h?h({isActive:q}):h}))},e.MatchRoute=function(e){var t=e.children,r=u(e,h),n=M()(r);return"function"==typeof t?t(n):n?t:null},e.MatchesProvider=g,e.Navigate=function(e){var t=j();return m((function(){t(e)}),[t]),null},e.Outlet=k,e.Prompt=function(e){var t=e.message,r=e.when,n=e.children;return N(t,null==r||r),null!=n?n:null},e.ReactLocation=y,e.Router=function(e){var t=e.children,r=e.location,n=e.routes,c=e.basepath,s=u(e,o),l=B("/"+(null!=c?c:"")),h=a.useState({location:r.current,matches:[]}),v=h[0],d=h[1],y=a.useMemo((function(){return{id:"root",params:{},search:{},pathname:l,route:null}}),[l]),b=a.useMemo((function(){var e={};return n=function t(r,n){return r.map((function(r){var a,u,o=null!=(a=r.path)?a:"*",c=H(["root"===(null==n?void 0:n.id)?"":null==n?void 0:n.id,(null==o?void 0:o.replace(/(.)\/$/,"$1"))+(r.id?"-"+r.id:"")]);if(r=i({},r,{id:c}),e[c])throw new Error;return e[c]=r,r.children=null!=(u=r.children)&&u.length?t(r.children,r):void 0,r}))}(n),i({},s,{routesById:e,routes:n,basepath:l,rootMatch:y,state:v})}),[v,y,l]);return console.log(b.state),m((function(){var e=function(){var e=P(b,r.current);d((function(){return{location:r.current,matches:e}}))};return e(),r.subscribe(e)}),[r.current.key]),a.createElement(f.Provider,{value:{location:r}},a.createElement(p.Provider,{value:b},a.createElement(g,{value:[b.rootMatch].concat(b.state.matches)},null!=t?t:a.createElement(k,null))))},e.cleanPath=B,e.defaultParseSearch=D,e.defaultStringifySearch=q,e.functionalUpdate=C,e.matchByPath=A,e.matchRoute=x,e.matchRoutes=P,e.parsePathname=T,e.resolvePath=z,e.useLocation=b,e.useMatch=S,e.useMatchRoute=M,e.useMatches=O,e.useNavigate=j,e.useParentMatches=function(){var e=w(),t=S(),r=e.state.matches;return r.slice(0,r.findIndex((function(e){return e.id===t.id}))-1)},e.usePrompt=N,e.useResolvePath=L,e.useRouter=w,e.useSearch=function(){return b().current.search},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.production.js.map
